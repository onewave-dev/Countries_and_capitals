# Telegram Bot ¬´–°—Ç–æ–ª–∏—Ü—ã –º–∏—Ä–∞ ‚Äî —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞¬ª (AGENTS.md)

–°–¥–µ–ª–∞—Ç—å Telegram-–±–æ—Ç–∞ —Å –≤–µ–±—Ö—É–∫–æ–º (**FastAPI**), —Ä–µ–∞–ª–∏–∑—É—é—â–µ–≥–æ –ø—è—Ç—å —Ä–µ–∂–∏–º–æ–≤ –æ–±—É—á–µ–Ω–∏—è/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è–º **—Å—Ç—Ä–∞–Ω–∞ ‚Üî —Å—Ç–æ–ª–∏—Ü–∞**.

---

## –ü–†–ê–í–ò–õ–ê –ò –†–ï–ñ–ò–ú–´

–ë–æ—Ç –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—É—á–∏—Ç—å –∏ –Ω–∞—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è **—Å—Ç—Ä–∞–Ω–∞ ‚Üî —Å—Ç–æ–ª–∏—Ü–∞** –ø—è—Ç—å—é –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏. –í–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å **–∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç** (–ï–≤—Ä–æ–ø–∞ / –ê–∑–∏—è / –ê—Ñ—Ä–∏–∫–∞ / –°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞ / –Æ–∂–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞ / –ê–≤—Å—Ç—Ä–∞–ª–∏—è –∏ –û–∫–µ–∞–Ω–∏—è / –í–µ—Å—å –º–∏—Ä). –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ.

–ö–æ–º–∞–Ω–¥—ã **/quit** –∏ **/exit** –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–∞—é—Ç —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –≤—ã–≤–æ–¥—è—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–°–µ—Å—Å–∏—è –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∞. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥–∞–º–º—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /start¬ª.

–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ –º–µ–Ω—é –¥–æ—Å—Ç—É–ø–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç ¬´[–∞–¥–º.]‚ÄØ–¢–µ—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞¬ª –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞: –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞ –º–∞—Ç—á —Å—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –≤—Ç–æ—Ä—ã–º –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫, –ø–æ—ç—Ç–æ–º—É —ç—Ç–∞–ø –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è.

### 1) ¬´–§–ª—ç—à-–∫–∞—Ä—Ç–æ—á–∫–∏¬ª (–æ–±—É—á–µ–Ω–∏–µ, 1 –∏–≥—Ä–æ–∫)

- –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É:
  - ¬´üáπüá≠ –¢–∞–∏–ª–∞–Ω–¥ ‚Üí ?¬ª
  - ¬´–°—Ç–æ–ª–∏—Ü–µ–π –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω—ã —è–≤–ª—è–µ—Ç—Å—è **–ë–∞–Ω–≥–∫–æ–∫**?¬ª
  - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ.
- –ü–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π ‚Äî **—á–µ—Ç—ã—Ä–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞**, –∞ —Ç–∞–∫–∂–µ –∫–Ω–æ–ø–∫–∏ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª, ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª, ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å¬ª.
- –ü–æ –Ω–∞–∂–∞—Ç–∏—é ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª –±–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É –≤ —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ –∏ –ø—Ä–∏ –≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ (—Å—Ç—Ä–∞–Ω–∞, ¬´–°—Ç–æ–ª–∏—Ü–∞: ‚Ä¶¬ª, —Ñ–ª–∞–≥, —Ñ–∞–∫—Ç), –Ω–æ –±–µ–∑ —Å—Ç—Ä–æ–∫–∏ ¬´‚úÖ‚ÄØ–í–µ—Ä–Ω–æ¬ª.
- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´‚úÖ‚ÄØ–í–µ—Ä–Ω–æ¬ª –∏–ª–∏ ¬´‚ùå‚ÄØ–ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ‚Ä¶¬ª –±–µ–∑ –∏–Ω–ª–∞–π–Ω‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. –ü—Ä–∏ –≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã, —Å—Ç—Ä–æ–∫–∞ ¬´–°—Ç–æ–ª–∏—Ü–∞: {capital}¬ª (–µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ —Å—Ç–æ–ª–∏—Ü—É) –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ –∏–∑ `assets/flags/{iso}_flag.png`. –ó–∞—Ç–µ–º –±–æ—Ç –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç –∏–∑ `data/facts_st.json` (–ø–æ —Ç—Ä–∏ —Ñ–∞–∫—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω—É) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ –≤–º–µ—Å—Ç–µ —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ï—â–µ –æ–¥–∏–Ω —Ñ–∞–∫—Ç¬ª. –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç LLM, –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–æ–≤—ã–º —Ñ–∞–∫—Ç–æ–º –∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–∫—Ç; –∫–∞–∂–¥—ã–π —Ñ–∞–∫—Ç ‚â§150 —Å–∏–º–≤–æ–ª–æ–≤.
- –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –±–æ—Ç –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ ¬´**–Ω–µ–∏–∑—É—á–µ–Ω–Ω—ã—Ö**¬ª (–Ω–µ–≤–µ—Ä–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã) –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∏—Ö –æ—Ç–¥–µ–ª—å–Ω–æ.

### 2) ¬´–ò–≥—Ä–∞ –Ω–∞ –≤—Ä–µ–º—è¬ª (—Å–ø—Ä–∏–Ω—Ç, 1 –∏–≥—Ä–æ–∫)

- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è ‚Äî **60 —Å–µ–∫—É–Ω–¥**.
- –ü–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: ¬´–£ —Ç–µ–±—è –±—É–¥–µ—Ç 60 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ¬ª.
- –°–µ—Ä–∏—è –±—ã—Å—Ç—Ä—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (–∫–Ω–æ–ø–∫–∏ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞). –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ.
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´‚úÖ‚ÄØ–í–µ—Ä–Ω–æ¬ª –∏–ª–∏ ¬´‚ùå‚ÄØ–ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ‚Ä¶¬ª –±–µ–∑ –∏–Ω–ª–∞–π–Ω‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. –ü—Ä–∏ –≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã, —Å—Ç—Ä–æ–∫–∞ ¬´–°—Ç–æ–ª–∏—Ü–∞: {capital}¬ª (–µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ —Å—Ç–æ–ª–∏—Ü—É) –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞.
- –ó–∞ –∫–∞–∂–¥—ã–π –≤–µ—Ä–Ω—ã–π ‚Äî +1 –æ—á–∫–æ.
- –ö–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª –¥–æ–ø—É—Å—Ç–∏–º–∞ –∏ –¥–∞—ë—Ç **0 –æ—á–∫–æ–≤**.
- –§–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥: ¬´‚è± –í—Ä–µ–º—è –≤—ã—à–ª–æ! –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: **14 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏–∑ 18**\n\n–ß—Ç–æ –±—ã–ª–æ –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:\nüáπüá≠ –¢–∞–∏–ª–∞–Ω–¥ ‚Äî –ë–∞–Ω–≥–∫–æ–∫\n‚Ä¶¬ª.

### 3) ¬´–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤: —Å—Ç–æ–ª–∏—Ü—ã –º–∏—Ä–∞¬ª (2 –∏–≥—Ä–æ–∫–∞ –ø—Ä–æ—Ç–∏–≤ –±–æ—Ç–∞)

- –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –º–∞—Ç—á–∞: –ø–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫ –≤–≤–æ–¥–∏—Ç –∏–º—è –∏ –ø–æ–ª—É—á–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞. –í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫ –ø–æ —Å—Å—ã–ª–∫–µ/–∏–∑ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Ç–∞–∫–∂–µ –≤–≤–æ–¥–∏—Ç –∏–º—è –∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–≤—à–∏–º—Å—è. –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∏–º–µ–Ω –æ–±–∞ –∏–≥—Ä–æ–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–∏—Ä–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã.
- –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç (–ï–≤—Ä–æ–ø–∞ / –ê–∑–∏—è / –ê—Ñ—Ä–∏–∫–∞ / –°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞ / –Æ–∂–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞ / –ê–≤—Å—Ç—Ä–∞–ª–∏—è –∏ –û–∫–µ–∞–Ω–∏—è / –í–µ—Å—å –º–∏—Ä¬†‚Äî 30 —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–∞—Ä).
- –ó–∞—Ç–µ–º –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–æ–ø–µ—Ä–Ω–∏–∫–∞:
  - üü¢ –õ—ë–≥–∫–∏–π ‚Äî –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤–µ—Ä–Ω–æ –≤ 50‚ÄØ% —Å–ª—É—á–∞–µ–≤;
  - üü° –°—Ä–µ–¥–Ω–∏–π ‚Äî 70‚ÄØ%;
  - üî¥ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π ‚Äî 90‚ÄØ%.
- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ.
- –ò–≥—Ä–æ–∫–∏ –æ—Ç–≤–µ—á–∞—é—Ç –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≤ —Å–≤–æ–∏—Ö –ª–∏—á–∫–∞—Ö (–∫–Ω–æ–ø–∫–∏ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞): —Å–Ω–∞—á–∞–ª–∞ –ò–≥—Ä–æ–∫¬†1, –∑–∞—Ç–µ–º –ò–≥—Ä–æ–∫¬†2, –∑–∞—Ç–µ–º –æ—Ç–≤–µ—Ç –±–æ—Ç–∞. –í–æ–ø—Ä–æ—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å –±—ã–ª –æ—Ç–≤–µ—á–µ–Ω –≤–µ—Ä–Ω–æ. –í–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç —É–¥–∞–ª—è–µ—Ç –ø–∞—Ä—É –∏–∑ –æ—á–µ—Ä–µ–¥–∏. –ü—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ,  –≤–æ–ø—Ä–æ—Å –∑–∞–¥–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å—é, –∏ —Ç–∞–∫ –ø–æ–∫–∞ –∫–∞–∫–æ–π-—Ç–æ –∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç –µ–≥–æ –≤–µ—Ä–Ω–æ. 
- –í–æ–ø—Ä–æ—Å –ø–æ –æ–¥–Ω–æ–π –ø–∞—Ä–µ (—Å—Ç—Ä–∞–Ω–∞-—Å—Ç–æ–ª–∏—Ü–∞) –∑–∞–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –Ω–µ —Å—á–∏—Ç–∞—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–æ–ø—Ä–æ—Å, –µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –Ω–µ –±—ã–ª –æ—Ç–≤–µ—á–µ–Ω –≤–µ—Ä–Ω–æ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ö–æ–¥–µ. 
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –±–æ—Ç —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –∏—Ç–æ–≥ –æ–±–æ–∏–º –∏–≥—Ä–æ–∫–∞–º, –≤—ã–ø–æ–ª–Ω—è—è —Ä–æ–ª—å ¬´–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–±—â–µ–≥–æ —á–∞—Ç–∞¬ª.
- –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ö–æ–¥–æ–º, –±–æ—Ç –æ–±—ä—è–≤–ª—è–µ—Ç –≤ —á–∞—Ç–µ, —á–µ–π —Å–µ–π—á–∞—Å —Ö–æ–¥. 
- –í—Ä–µ–º—è –Ω–∞ —Ö–æ–¥ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ; –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏ –ø–∞—É–∑–∞ 2‚Äì3 —Å–µ–∫—É–Ω–¥—ã.
- –ú–∞—Ç—á –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—Å–µ –ø–∞—Ä—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã. –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å—Ç—Ä–æ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ:
  - —Å—Ç—Ä–æ–∫–∞ ¬´–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.¬ª;
  - –¥–∞–ª–µ–µ –ø–æ —Å—Ç—Ä–æ–∫–µ ¬´{–∏–º—è –∏–≥—Ä–æ–∫–∞}: {–æ—á–∫–∏}¬ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –ø–æ—Ä—è–¥–∫–µ —Ö–æ–¥–æ–≤;
  - —Å—Ç—Ä–æ–∫–∞ ¬´–ë–æ—Ç: {–æ—á–∫–∏}¬ª;
  - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –∏ —Å—Ç—Ä–æ–∫–∞ —Å –∏—Ç–æ–≥–æ–º: ¬´–ü–æ–±–µ–¥–∏–ª–∞ –∫–æ–º–∞–Ω–¥–∞ –∏–≥—Ä–æ–∫–æ–≤!¬ª / ¬´–ü–æ–±–µ–¥–∏–ª –±–æ—Ç!¬ª / ¬´–ù–∏—á—å—è!¬ª –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—É–º–º–∞—Ä–Ω—ã—Ö –æ—á–∫–æ–≤ –∏–≥—Ä–æ–∫–æ–≤ –∏ –±–æ—Ç–∞.

### 4) ¬´–£—á–∏—Ç—å –ø–æ —Å–ø–∏—Å–∫—É —Å—Ç—Ä–∞–Ω¬ª

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç.
- –ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Å–ø–∏—Å–æ–∫ –≤–∏–¥–∞ ¬´{—ç–º–æ–¥–∑–∏ —Ñ–ª–∞–≥} {—Å—Ç—Ä–∞–Ω–∞} - –°—Ç–æ–ª–∏—Ü–∞: {—Å—Ç–æ–ª–∏—Ü–∞}¬ª.
- –í –∫–æ–Ω—Ü–µ ‚Äî –∫–Ω–æ–ø–∫–∏ ¬´–î—Ä—É–≥–æ–π –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç¬ª –∏ ¬´–í –º–µ–Ω—é¬ª.

### 5) ¬´–¢–µ—Å—Ç¬ª

- –í–æ–ø—Ä–æ—Å—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ —Å–ª—É—á–∞–π–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.
- –ü–æ—Å–ª–µ –≤–µ—Ä–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∏ –æ–ø—Ü–∏–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å —Ñ–ª–∞–≥–æ–º.
- –ü—Ä–∏ –≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ —Å—Ç—Ä–æ–∫–∞ ¬´‚úÖ‚ÄØ–í–µ—Ä–Ω–æ. (–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: X –∏–∑ Y. –û—Å—Ç–∞–ª–æ—Å—å –≤–æ–ø—Ä–æ—Å–æ–≤ Z)¬ª –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø–æ–¥–ø–∏—Å—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –∏ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.
- –î–∞–ª–µ–µ —á–µ—Ä–µ–∑ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –∏–¥—É—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Å—Ç—Ä–æ–∫–∞ ¬´–°—Ç–æ–ª–∏—Ü–∞: {capital}¬ª.
- –ï—â–µ –æ–¥–Ω–∞ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –æ—Ç–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç. –ö –∫–∞—Ä—Ç–æ—á–∫–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–ï—â–µ –æ–¥–∏–Ω —Ñ–∞–∫—Ç¬ª.
- –ù–∞–∂–∞—Ç–∏–µ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª –≤—ã–≤–æ–¥–∏—Ç —Ç–∞–∫—É—é –∂–µ –∫–∞—Ä—Ç–æ—á–∫—É, –Ω–æ –±–µ–∑ —Å—Ç—Ä–æ–∫–∏ ¬´‚úÖ‚ÄØ–í–µ—Ä–Ω–æ‚Ä¶¬ª.

---

## üéØ –¶–µ–ª—å

–°–¥–µ–ª–∞—Ç—å Telegram-–±–æ—Ç–∞ —Å –≤–µ–±—Ö—É–∫–æ–º (**FastAPI**), –∫–æ—Ç–æ—Ä—ã–π:

- –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—è—Ç—å —Ä–µ–∂–∏–º–æ–≤: **–§–ª—ç—à-–∫–∞—Ä—Ç–æ—á–∫–∏**, **–ò–≥—Ä–∞ –Ω–∞ –≤—Ä–µ–º—è**, **–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤**, **–£—á–∏—Ç—å –ø–æ —Å–ø–∏—Å–∫—É —Å—Ç—Ä–∞–Ω**, **–¢–µ—Å—Ç**;
- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–º, –∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ;
- —Ö—Ä–∞–Ω–∏—Ç –±–∞–∑–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–ª—å–∫–æ **–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏** (—É—Å–ø–µ—Ö–∏ –≤ —Å–ø—Ä–∏–Ω—Ç–µ, —Å–ø–∏—Å–æ–∫ ¬´–∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é¬ª);
- —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –º–∞—Ç—á –¥–ª—è –¥–≤—É—Ö –∏–≥—Ä–æ–∫–æ–≤ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏, —Å–ª—É—á–∞–π–Ω—ã–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤–æ–ø—Ä–æ—Å–æ–≤, –ø–æ–≤—Ç–æ—Ä–æ–º –ø—Ä–∏ –æ—à–∏–±–∫–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –≤—Å–µ—Ö –ø–∞—Ä;
- –∏–º–µ–µ—Ç —Ç–µ—Å—Ç–æ–≤—É—é –∞–¥–º–∏–Ω-–≤–µ—Ä—Å–∏—é –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (—Å–º. –¥–∞–ª–µ–µ), –∑–∞–ø—É—Å–∫–∞–µ–º—É—é –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—É–Ω–∫—Ç–æ–º –º–µ–Ω—é ¬´[–∞–¥–º.]‚ÄØ–¢–µ—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞¬ª.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**FastAPI**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `POST /webhook` (–∞–ø–¥–µ–π—Ç—ã Telegram).
- –°–ª—É–∂–µ–±–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã:  
  `GET /healthz`, `GET /set_webhook`, `GET /reset_webhook`.

**python-telegram-bot v20+**
- –°–æ–∑–¥–∞–Ω–∏–µ `Application` –≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ FastAPI.
 - `job_queue` –¥–ª—è —Ç–∞–π–º–µ—Ä–æ–≤ (—Å–ø—Ä–∏–Ω—Ç, –ø–∞—É–∑—ã –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏).
- –ê–ø–¥–µ–π—Ç—ã –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `application.process_update(update)`.

**–ú–æ–¥–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è**
- ¬´Hub-and-Spoke¬ª –≥–∏–±—Ä–∏–¥:
  - –û–¥–∏–Ω–æ—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã (–∫–∞—Ä—Ç–æ—á–∫–∏, —Å–ø—Ä–∏–Ω—Ç) –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ **–ª–∏—á–∫–∞—Ö** —Å –±–æ—Ç–æ–º.
  - –ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤ **–ª–∏—á–Ω—ã—Ö —á–∞—Ç–∞—Ö** —Å –±–æ—Ç–æ–º. –û–Ω —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –∏ –∏—Ç–æ–≥–∏ –æ–±–æ–∏–º –∏–≥—Ä–æ–∫–∞–º, –∏—Å–ø–æ–ª–Ω—è—è —Ä–æ–ª—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–±—â–µ–≥–æ —á–∞—Ç–∞.

**–°–æ—Å—Ç–æ—è–Ω–∏–µ**
- –û–¥–∏–Ω–æ—á–Ω—ã–µ —Å–µ—Å—Å–∏–∏ ‚Äî –≤ `user_data` (–ø—Ä–æ–≥—Ä–µ—Å—Å –∫–∞—Ä—Ç–æ—á–µ–∫, —Å–ø—Ä–∏–Ω—Ç).
- –ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏ ‚Äî –≤ `chat_data['sessions'][session_id]`:
  - —É—á–∞—Å—Ç–Ω–∏–∫–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞, –æ—á–µ—Ä–µ–¥—å –ø–∞—Ä, —á—å—è –æ—á–µ—Ä–µ–¥—å, —Å–ø–∏—Å–æ–∫ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤, –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∂–æ–±—ã –ø–∞—É–∑.
- –î–ª—è Render Free –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞; –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ø–æ–∑–∂–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ë–î.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**
- –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `allowed_updates=[]` –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–µ–±—Ö—É–∫–∞.
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–∏—Å–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–µ–±—Ö—É–∫ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ-—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π health-check –≤–µ–±—Ö—É–∫–∞.
- –ù–µ —É–¥–∞–ª—è—Ç—å –≤–µ–±—Ö—É–∫ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ ‚Äî Telegram –ø–æ–¥–Ω–∏–º–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ –Ω–æ–≤–æ–º—É –∞–ø–¥–µ–π—Ç—É.
- –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö –∫–æ–æ–ø-–º–∞—Ç—á–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `session_id` –∏ `player_id` –≤ `callback_data` (–∏–≥–Ω–æ—Ä —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü).
- –î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è UI ¬´–≥–∞—Å–∏—Ç—å¬ª –∫–Ω–æ–ø–∫–∏ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è) –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —à–∞–≥–∏ –≤ DEBUG (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ç—á–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞, –ø–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤, –ø–∞—É–∑—ã).

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

### DataSource (–¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω/—Å—Ç–æ–ª–∏—Ü)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∏–∑ `capitals.json`.  
- `countries_by_continent: dict[Continent, set[Country]]`
- `capital_by_country: dict[Country, Capital]`
- `country_by_capital: dict[Capital, Country]`
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∑–∞–ø—Ä–æ—Å—É –¥–ª—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç–∏.  
- –ê–ª–∏–∞—Å—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

### CardSession (—Ñ–ª—ç—à-–∫–∞—Ä—Ç–æ—á–∫–∏, –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- `user_id`
- `continent_filter`
- `mode` (–≤—Å–µ–≥–¥–∞ `mixed`, –≤–æ–ø—Ä–æ—Å—ã –≤ —Å–ª—É—á–∞–π–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏)
- `queue` (–∏—Ç–µ—Ä–∞—Ç–æ—Ä/—Å–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è)
- `unknown_set` (ID —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏)
- `stats` (–ø–æ–∫–∞–∑—ã/–∑–Ω–∞–Ω–∏—è)

### SprintSession (—Å–ø—Ä–∏–Ω—Ç, –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- `user_id`
- `duration_sec` (60)
- `start_ts`
- `continent_filter`
- `score`, `questions_asked`
- `wrong_answers`
- `current` (—Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å)

### CoopMatch (–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤, –Ω–∞ —á–∞—Ç/–≥—Ä—É–ø–ø—É)
- `session_id`
- `players: list[PlayerRef]` (—Ä–æ–≤–Ω–æ –¥–≤–æ–µ), `turn_index` (0/1)
  - `continent_filter`, `mode` (–≤—Å–µ–≥–¥–∞ `mixed`)
- `queue` (—Å–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø–∞—Ä)
- `wrong_pairs` (–Ω–µ–≤–µ—Ä–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞)
- `anchor_message_id` (—è–∫–æ—Ä—å —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏ —Ç–∞–±–ª–æ)
- `active_job_ids` (–ø–∞—É–∑—ã –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏)
- `current_question` (+ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç)

### PlayerRef
- `user_id`
- `display_name`

---

## ‚ñ∂Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤

- –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: `capitals.json`.  
  –°–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–∞–Ω—ã, —Å—Ç–æ–ª–∏—Ü—ã, —Ä–∞–∑–±–∏–≤–∫—É –ø–æ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–º.  
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞:
  1) —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—É,  
  2) —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è,
  3) –≤—ã–±–æ—Ä –ø–∞—Ä—ã (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç),  
  4) –ø–æ–¥–±–æ—Ä **3 –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö, –Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö** –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–∑ —Ç–æ–≥–æ –∂–µ –ø—É–ª–∞,  
  5) —Å–ª—É—á–∞–π–Ω–∞—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞.

---

## ‚ñ∂Ô∏è –ü–æ—Ç–æ–∫–∏ —Ä–µ–∂–∏–º–æ–≤

### –§–ª—ç—à-–∫–∞—Ä—Ç–æ—á–∫–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ª–∏—á–∫–µ –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç –∏ –∂–º—ë—Ç ¬´–°—Ç–∞—Ä—Ç¬ª. –í–æ–ø—Ä–æ—Å—ã –∏–¥—É—Ç –≤ —Å–ª—É—á–∞–π–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.
2. –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Å —á–µ—Ç—ã—Ä—å–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞; –¥–æ—Å—Ç—É–ø–Ω—ã ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª –∏ ¬´–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å¬ª. –ù–∞–∂–∞—Ç–∏–µ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç¬ª —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –±–µ–∑ —Å—Ç—Ä–æ–∫–∏ ¬´‚úÖ‚ÄØ–í–µ—Ä–Ω–æ¬ª.
3. –í–µ–¥—ë—Ç—Å—è `unknown_set`; –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ ‚Äî –æ—Ç—á—ë—Ç –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å ¬´–Ω–µ–∏–∑—É—á–µ–Ω–Ω—ã–µ¬ª.

### –ò–≥—Ä–∞ –Ω–∞ –≤—Ä–µ–º—è
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60 —Å) –∏ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç. –í–æ–ø—Ä–æ—Å—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ —Å–ª—É—á–∞–π–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.
2. –°—Ç–∞—Ä—Ç: –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä —á–µ—Ä–µ–∑ `job_queue`.
3. –°–µ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏; —Å—á—ë—Ç—á–∏–∫ –≤–µ—Ä–Ω—ã—Ö/–æ—à–∏–±–æ–∫.
4. –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞ ‚Äî ¬´‚è± –í—Ä–µ–º—è –≤—ã—à–ª–æ!¬ª –∏ –∏—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### –ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤
1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –º–∞—Ç—á–∞: –ø–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫, –∑–∞—Ö–æ–¥—è –≤ –∏–≥—Ä—É –≤–≤–æ–¥–∏—Ç –∏–º—è (–¥–æ —ç—Ç–æ–≥–æ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã) , –∞ –∑–∞—Ç–µ–º  –ø–æ–ª—É—á–∞–µ—Ç –¥–≤–µ –æ–ø—Ü–∏–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ –≤–∏–¥–µ –∫–Ω–æ–ø–æ–∫ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∏–∑ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤" (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç–µ–ª–µ–≥—Ä–∞–º) –∏ "–°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É" (—Å–æ–∑–¥–∞–µ—Ç —Å—Å—ã–ª–∫—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Ç–æ—Ä–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É). –í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ. –í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –≤–≤–µ—Å—Ç–∏ –∏–º—è (–¥–æ —ç—Ç–æ–≥–æ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã –µ–º—É –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã) –∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–≤—à–∏–º—Å—è, –ø–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º —á—Ç–æ –≤—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è, –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–≥—Ä—ã.
2. –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±–æ–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±–æ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç (–∏–ª–∏ ¬´–í–µ—Å—å –º–∏—Ä (30 –ø–∞—Ä)¬ª); –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤—Å–µ–≥–¥–∞ —Å–º–µ—à–∞–Ω–Ω–æ–µ. –ó–∞—Ç–µ–º –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–æ–ø–µ—Ä–Ω–∏–∫–∞:
   - üü¢ –õ—ë–≥–∫–∏–π ‚Äî –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤–µ—Ä–Ω–æ –≤ 50‚ÄØ% —Å–ª—É—á–∞–µ–≤;
   - üü° –°—Ä–µ–¥–Ω–∏–π ‚Äî 70‚ÄØ%;
   - üî¥ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π ‚Äî 90‚ÄØ%.
3. –ë–æ—Ç –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å ‚Üí –æ—Ç–≤–µ—á–∞–µ—Ç –ò–≥—Ä–æ–∫¬†1 ‚Üí –¢–æ—Ç –∂–µ –≤–æ–ø—Ä–æ—Å, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –ò–≥—Ä–æ–∫–∞ 1 –±—ã–ª –Ω–µ–≤–µ—Ä–Ω—ã–º. –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –ò–≥—Ä–æ–∫–∞ 1 –±—ã–ª –≤–µ—Ä–Ω—ã–º ‚Üí –æ—Ç–≤–µ—á–∞–µ—Ç –ò–≥—Ä–æ–∫¬†2 ‚Üí –¢–æ—Ç –∂–µ –≤–æ–ø—Ä–æ—Å, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –ò–≥—Ä–æ–∫–∞ 2 –±—ã–ª –Ω–µ–≤–µ—Ä–Ω—ã–º. –ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –ò–≥—Ä–æ–∫–∞ 2 –±—ã–ª –≤–µ—Ä–Ω—ã–º ‚Üí –û—Ç–≤–µ—á–∞–µ—Ç –¥–∞–º–º–∏-–∏–≥—Ä–æ–∫ (–±–æ—Ç) ‚Üí ...
4. –ò–≥—Ä–æ–∫ 1  –∏ –∏–≥—Ä–æ–∫ 2 —Å—á–∏—Ç–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π, –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—É–º–º–∏—Ä—É—é—Ç—Å—è. 
5. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –±–æ—Ç —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –∏—Ç–æ–≥ –æ–±–æ–∏–º –∏–≥—Ä–æ–∫–∞–º –∏ –¥–µ–ª–∞–µ—Ç –ø–∞—É–∑—É 2‚Äì3¬†—Å–µ–∫ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.
6. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –≤—Å–µ—Ö –ø–∞—Ä ‚Üí –∏—Ç–æ–≥ –∏ —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –±—ã–ª–∏), –∫–Ω–æ–ø–∫–∞ ¬´üîÑ –°—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞¬ª.

---

## üì¶ –¢–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã (–∞–¥–º–∏–Ω)

–î–æ–±–∞–≤–∏—Ç—å **—Ç–µ—Å—Ç–æ–≤—É—é –∞–¥–º–∏–Ω-–≤–µ—Ä—Å–∏—é –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞**, –∑–∞–ø—É—Å–∫–∞–µ–º—É—é –∫–Ω–æ–ø–∫–æ–π ¬´[–∞–¥–º.]‚ÄØ–¢–µ—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞¬ª (–¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ `ADMIN_ID`):
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç, –ø–æ—Å–ª–µ —á–µ–≥–æ –º–∞—Ç—á —Å—Ä–∞–∑—É —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.
- –í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∫ ¬´–ò–≥—Ä–æ–∫ 2¬ª.
- –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–≤–∞ —Ä–∞–∑–∞ –∏–∑ –∫–∞–∂–¥—ã—Ö —Ç—Ä—ë—Ö.
- –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤—É.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ AGENTS.md
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îî‚îÄ‚îÄ flags/                 # –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤ {iso}_flag.png
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ capitals.json           # –¥–∞–Ω–Ω—ã–µ: —Å—Ç—Ä–∞–Ω—ã, —Å—Ç–æ–ª–∏—Ü—ã, –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ handlers_cards.py       # —Ñ–ª—ç—à-–∫–∞—Ä—Ç–æ—á–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ handlers_sprint.py      # –∏–≥—Ä–∞ –Ω–∞ –≤—Ä–µ–º—è
‚îÇ   ‚îú‚îÄ‚îÄ handlers_coop.py        # –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤ (2 –∏–≥—Ä–æ–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py
‚îÇ   ‚îú‚îÄ‚îÄ questions.py            # –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤/–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ state.py                # –º–æ–¥–µ–ª–∏ —Å–µ—Å—Å–∏–π/–º–∞—Ç—á–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ facts.py                # —Ñ–∞–∫—Ç—ã: `data/facts_st.json` + LLM
‚îÇ   ‚îî‚îÄ‚îÄ utils.py                # —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

---

## üìú requirements.txt

```txt
python-telegram-bot>=20.6
fastapi>=0.110
uvicorn[standard]>=0.30
pydantic>=2.6
```

*(–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: `orjson` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ JSON, `python-dotenv` –¥–ª—è .env.)*

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ

1) –°–æ–∑–¥–∞—Ç—å `.env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. –Ω–∏–∂–µ).  
2) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```
3) –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:
```bash
uvicorn app:app --host 0.0.0.0 --port 8000
```
4) –ü—Ä–æ–±—Ä–æ—Å–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π HTTPS-URL (ngrok / cloudflared).  
5) –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±—Ö—É–∫:
```bash
GET /set_webhook
```

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render (Free)

1) –°–æ–∑–¥–∞—Ç—å **Web Service** –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.  
2) –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
- **Build Command**
```bash
pip install -r requirements.txt
```
- **Start Command**
```bash
uvicorn app:app --host 0.0.0.0 --port $PORT
```
- **Env Vars**: —Å–º. –Ω–∏–∂–µ.
3) –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä—ã—Ç—å:
```text
https://<service>.onrender.com/set_webhook
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ**
- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –æ—Ç @BotFather  
- `PUBLIC_URL` ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π HTTPS-URL —Å–µ—Ä–≤–∏—Å–∞  
- `WEBHOOK_SECRET` ‚Äî –¥–ª–∏–Ω–Ω–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞  
- `WEBHOOK_PATH` ‚Äî –ø—É—Ç—å –≤–µ–±—Ö—É–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/webhook`)
- `OPENAI_API_KEY` ‚Äî –∫–ª—é—á OpenAI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–∫—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ**
- `ADMIN_ID` ‚Äî Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ –∏ —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥)
- `DEFAULT_LOCALE` ‚Äî `ru`
- `LOG_LEVEL` ‚Äî `INFO` / `DEBUG`
 
## ü§ñ –§–∞–∫—Ç—ã

- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `data/facts_st.json` ‚Äî –ø–æ —Ç—Ä–∏ —Ñ–∞–∫—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω—É.
- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–∫—Ç –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞.
- –ü–æ—Å–ª–µ —Ñ–∞–∫—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–ï—â–µ –æ–¥–∏–Ω —Ñ–∞–∫—Ç¬ª, –Ω–∞–∂–∞—Ç–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç LLM –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.
- LLM-—Ñ–∞–∫—Ç –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 150 —Å–∏–º–≤–æ–ª–∞–º–∏.

---

## üîê –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —á–µ—Å—Ç–Ω–æ—Å—Ç–∏

- –í –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –Ω–∞–∂–∞—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç **—Ç–æ–ª—å–∫–æ** –æ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–≤—É—Ö –∏–≥—Ä–æ–∫–æ–≤ (`player_id` –≤ `callback_data`).
- ¬´–ì–∞—Å–∏—Ç—å¬ª –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è).
- –•—Ä–∞–Ω–∏—Ç—å `session_id` –≤ `callback_data`, –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ `chat_id`.
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø–æ `ADMIN_ID`.
- –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏: –ª–æ–≤–∏—Ç—å `telegram.error.RetryAfter` –∏ –¥–µ–ª–∞—Ç—å backoff –ø—Ä–∏ `429`.

## üí° –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

- –í–µ–±—Ö—É–∫ (`telegram_webhook`) –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π HTTP —Å—Ç–∞—Ç—É—Å: –Ω–∞ –æ—à–∏–±–∫–∏ ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ (–Ω–µ –≤—Å–µ–≥–¥–∞ `200`); `Update.de_json` –∏ `application.process_update` –æ–±—ë—Ä–Ω—É—Ç—ã –≤ `try/except`.
- –í—Å–µ –≤—ã–∑–æ–≤—ã `context.bot.*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `send_message`, `edit_message_text`) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ `try/except` (`telegram.error.TelegramError` –∏–ª–∏ `httpx.HTTPError`) —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
- –°–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç `/healthz`, –æ—Ç–≤–µ—á–∞—é—â–∏–π **200** –¥–ª—è health-check –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π `HEAD /` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞.
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ `get_webhook_info().last_error_message` –Ω–µ –ø—É—Å—Ç–æ–π, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `delete_webhook(drop_pending_updates=True)` –∏ –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–∞.

---

## üß™ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í–∫–ª—é—á–∏—Ç—å DEBUG-–ª–æ–≥–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Ç–æ—á–∫–∞–º:
  - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–∞,
  - —Å—Ç–∞—Ä—Ç —Å–µ—Å—Å–∏–π/–º–∞—Ç—á–µ–π,
  - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞/–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤,
  - –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤,
   - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –ø–∞—É–∑ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏,
  - —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Ç–æ–≥–∏.
- –õ–æ–≥–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: –∞–≥—Ä–µ–≥–∞—Ü–∏—è —Å—á—ë—Ç–∞ –≤ —Å–ø—Ä–∏–Ω—Ç–µ, —Ä–∞–∑–º–µ—Ä ¬´unknown_set¬ª –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö.
